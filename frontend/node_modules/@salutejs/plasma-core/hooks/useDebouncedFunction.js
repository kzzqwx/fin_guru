"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useDebouncedFunction = useDebouncedFunction;
var _react = /*#__PURE__*/_interopRequireDefault( /*#__PURE__*/require("react"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
/**
 * @param {Function} func
 * @param {number} delay
 * @param {boolean} cleanUp
 * https://habr.com/ru/company/domclick/blog/510616/
 */
function useDebouncedFunction(func, delay, cleanUp) {
  var timeoutRef = _react["default"].useRef();

  /**
   * Очистка таймера
   */
  function clearTimer() {
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
      timeoutRef.current = undefined;
    }
  }

  /**
   * Очищаем таймер при анмаунте компонента, если cleanUp выставлен в true
   * и тем самым отменяем последний запланированный вызов
   */
  _react["default"].useEffect(function () {
    return cleanUp ? clearTimer : undefined;
  }, [cleanUp]);
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    clearTimer();
    timeoutRef.current = setTimeout(function () {
      return func.apply(void 0, args);
    }, delay);
  };
}