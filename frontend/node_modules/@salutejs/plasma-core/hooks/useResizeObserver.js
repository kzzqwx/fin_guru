"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useResizeObserver = void 0;
var _react = /*#__PURE__*/require("react");
/**
 * Отслеживает изменение размеров переданного элемента
 * @param {React.Ref<T>} ref - реф элемента, за которым нужно следить
 * @callback callback - функция, которая вызывается при изменении элемента
 * @param {Element} element - элемент, размер которого изменился
 */
var useResizeObserver = exports.useResizeObserver = function useResizeObserver(ref, callback) {
  (0, _react.useEffect)(function () {
    /* istanbul ignore if: убираем проверку на рефы из покрытия */
    if (!(ref !== null && ref !== void 0 && ref.current)) {
      return;
    }
    var current = ref.current;
    var resizeObserver = new window.ResizeObserver(function () {
      window.requestAnimationFrame(function () {
        callback(current);
      });
    });
    resizeObserver.observe(ref.current);
    return function () {
      /* istanbul ignore if: убираем проверку на рефы из покрытия */
      if (!(ref !== null && ref !== void 0 && ref.current)) {
        return;
      }
      resizeObserver.unobserve(ref.current);
    };
  }, [ref]);
};