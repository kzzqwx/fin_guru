{"version":3,"file":"PopupContext.js","sources":["../../../src/components/Popup/PopupContext.tsx"],"sourcesContent":["import React, { createContext, useEffect, useState, useContext, FC, PropsWithChildren } from 'react';\n\nimport type { PopupContextType, PopupInfo } from './Popup.types';\n\nexport const POPUP_PORTAL_ID = 'plasma-popup-root';\n\nconst items: PopupInfo[] = [];\n\nconst PopupContext = createContext<PopupContextType>({\n    items,\n    register(_info: PopupInfo): void {\n        throw new Error('Function not implemented. Add PopupProvider');\n    },\n    unregister(_id: string): void {\n        throw new Error('Function not implemented. Add PopupProvider');\n    },\n});\n\nexport const usePopupContext = () => useContext(PopupContext);\n\nexport const PopupProvider: FC<PropsWithChildren> = ({ children }) => {\n    const [items, setItems] = useState<PopupInfo[]>([]);\n\n    const register = (info: PopupInfo) => {\n        setItems([...items, info]);\n    };\n\n    const unregister = (id: string) => {\n        const index = items.findIndex((item: PopupInfo) => id === item.id);\n\n        if (index === -1) {\n            return;\n        }\n\n        items.splice(index, 1);\n        setItems([...items]);\n    };\n\n    const context = {\n        items,\n        register,\n        unregister,\n    };\n\n    useEffect(() => {\n        return () => {\n            const portal = document.createElement('div');\n            if (portal && document.body.contains(portal)) {\n                document.body.removeChild(portal);\n            }\n        };\n    }, []);\n\n    return <PopupContext.Provider value={context}>{children}</PopupContext.Provider>;\n};\n"],"names":["POPUP_PORTAL_ID","items","PopupContext","createContext","register","_info","Error","unregister","_id","usePopupContext","useContext","PopupProvider","_ref","children","_useState","useState","_useState2","_slicedToArray","setItems","info","concat","_toConsumableArray","id","index","findIndex","item","splice","context","useEffect","portal","document","createElement","body","contains","removeChild","React","Provider","value"],"mappings":";;;AAIO,IAAMA,eAAe,GAAG,oBAAmB;AAElD,IAAMC,KAAkB,GAAG,EAAE,CAAA;AAE7B,IAAMC,YAAY,gBAAGC,aAAa,CAAmB;AACjDF,EAAAA,KAAK,EAALA,KAAK;EACLG,QAAQ,EAAA,SAAAA,QAACC,CAAAA,KAAgB,EAAQ;AAC7B,IAAA,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC,CAAA;GACjE;EACDC,UAAU,EAAA,SAAAA,UAACC,CAAAA,GAAW,EAAQ;AAC1B,IAAA,MAAM,IAAIF,KAAK,CAAC,6CAA6C,CAAC,CAAA;AAClE,GAAA;AACJ,CAAC,CAAC,CAAA;AAEWG,IAAAA,eAAe,GAAG,SAAlBA,eAAeA,GAAA;EAAA,OAASC,UAAU,CAACR,YAAY,CAAC,CAAA;AAAA,EAAA;IAEhDS,aAAoC,GAAG,SAAvCA,aAAoCA,CAAAC,IAAA,EAAqB;AAAA,EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ,CAAA;AAC3D,EAAA,IAAAC,SAAA,GAA0BC,QAAQ,CAAc,EAAE,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA,EAAA,CAAA,CAAA;AAA5Cb,IAAAA,KAAK,GAAAe,UAAA,CAAA,CAAA,CAAA;AAAEE,IAAAA,QAAQ,GAAAF,UAAA,CAAA,CAAA,CAAA,CAAA;AAEtB,EAAA,IAAMZ,QAAQ,GAAG,SAAXA,QAAQA,CAAIe,IAAe,EAAK;IAClCD,QAAQ,CAAA,EAAA,CAAAE,MAAA,CAAAC,kBAAA,CAAKpB,KAAK,CAAA,EAAA,CAAEkB,IAAI,CAAA,CAAC,CAAC,CAAA;GAC7B,CAAA;AAED,EAAA,IAAMZ,UAAU,GAAG,SAAbA,UAAUA,CAAIe,EAAU,EAAK;AAC/B,IAAA,IAAMC,KAAK,GAAGtB,KAAK,CAACuB,SAAS,CAAC,UAACC,IAAe,EAAA;AAAA,MAAA,OAAKH,EAAE,KAAKG,IAAI,CAACH,EAAE,CAAA;KAAC,CAAA,CAAA;AAElE,IAAA,IAAIC,KAAK,KAAK,CAAC,CAAC,EAAE;AACd,MAAA,OAAA;AACJ,KAAA;AAEAtB,IAAAA,KAAK,CAACyB,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC,CAAA;AACtBL,IAAAA,QAAQ,CAAAG,kBAAA,CAAKpB,KAAK,CAAC,CAAC,CAAA;GACvB,CAAA;AAED,EAAA,IAAM0B,OAAO,GAAG;AACZ1B,IAAAA,KAAK,EAALA,KAAK;AACLG,IAAAA,QAAQ,EAARA,QAAQ;AACRG,IAAAA,UAAU,EAAVA,UAAAA;GACH,CAAA;AAEDqB,EAAAA,SAAS,CAAC,YAAM;AACZ,IAAA,OAAO,YAAM;AACT,MAAA,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAAA;MAC5C,IAAIF,MAAM,IAAIC,QAAQ,CAACE,IAAI,CAACC,QAAQ,CAACJ,MAAM,CAAC,EAAE;AAC1CC,QAAAA,QAAQ,CAACE,IAAI,CAACE,WAAW,CAACL,MAAM,CAAC,CAAA;AACrC,OAAA;KACH,CAAA;GACJ,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,oBAAOM,KAAA,CAAAJ,aAAA,CAAC7B,YAAY,CAACkC,QAAQ,EAAA;AAACC,IAAAA,KAAK,EAAEV,OAAAA;AAAQ,GAAA,EAAEd,QAAgC,CAAC,CAAA;AACpF;;;;"}