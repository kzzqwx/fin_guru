'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var _rollupPluginBabelHelpers = require('../_virtual/_rollupPluginBabelHelpers.js');
var React = require('react');
var core = require('@linaria/core');
require('focus-visible');
var common = require('./common.js');

var _excluded = ["className"];
/* eslint-disable no-underscore-dangle */
var _component = function _component(componentConfig) {
  var tag = componentConfig.tag,
    base = componentConfig.base,
    name = componentConfig.name;
  var staticVariants = common.getStaticVariants(componentConfig);
  var dynamicVariants = common.getDynamicVariants(componentConfig);
  var Root = tag;
  var component = /*#__PURE__*/React.forwardRef(function (props, ref) {
    var className = props.className,
      rest = _rollupPluginBabelHelpers.objectWithoutProperties(props, _excluded);
    var variants = dynamicVariants(rest);
    var cls = core.cx.apply(void 0, [className, base].concat(_rollupPluginBabelHelpers.toConsumableArray(staticVariants), _rollupPluginBabelHelpers.toConsumableArray(variants)));

    // styled-components do it inside
    // filter props
    var baseProps = {};
    for (var key in rest) {
      if (!(key in componentConfig.variations)) {
        baseProps[key] = rest[key];
      }
    }
    baseProps.ref = ref;

    // styled-components do it inside
    // add props that should be attr( disabled for example)
    var htmlAttrs = {};
    for (var _key in componentConfig.variations || {}) {
      if (_key in rest) {
        var variant = componentConfig.variations[_key];
        var attrs = variant.attrs;
        if (typeof attrs === 'boolean') {
          htmlAttrs[_key] = rest[_key];
        }
      }
    }
    return /*#__PURE__*/React.createElement(Root, _rollupPluginBabelHelpers.extends({
      className: cls
    }, htmlAttrs, baseProps));
  });
  if (name) {
    component.displayName = name;
  }
  return component;
};

exports._component = _component;
//# sourceMappingURL=linaria.js.map
