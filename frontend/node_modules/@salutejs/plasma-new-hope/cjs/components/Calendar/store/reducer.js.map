{"version":3,"file":"reducer.js","sources":["../../../../src/components/Calendar/store/reducer.ts"],"sourcesContent":["import { getDateFromValue, getNextDate, getPrevDate, getStartYear } from '../utils';\n\nimport { CalendarStateType, Action, ActionType, InitialState } from './types';\n\nexport const getInitialState = (\n    value: Date | undefined,\n    size: [number, number],\n    calendarState: CalendarStateType,\n): InitialState => {\n    const initDate = value || new Date();\n    const date = getDateFromValue(initDate);\n\n    return {\n        date: { ...date, day: value !== undefined ? date.day : 0 },\n        startYear: getStartYear(date.year),\n        calendarState,\n        size,\n    };\n};\n\nexport const reducer = (state: InitialState, action: Action): InitialState => {\n    switch (action.type) {\n        case ActionType.PREVIOUS_MONTH: {\n            const { year, monthIndex } = action.payload;\n            const [prevYear, prevMonthIndex] = getPrevDate(year, monthIndex);\n\n            return {\n                ...state,\n                date: {\n                    day: state.date.day,\n                    monthIndex: prevMonthIndex,\n                    year: prevYear,\n                },\n            };\n        }\n        case ActionType.NEXT_MONTH: {\n            const { monthIndex, year } = action.payload;\n            const [nextYear, nextMonthIndex] = getNextDate(year, monthIndex);\n\n            return {\n                ...state,\n                date: {\n                    day: state.date.day,\n                    monthIndex: nextMonthIndex,\n                    year: nextYear,\n                },\n            };\n        }\n        case ActionType.PREVIOUS_YEAR: {\n            const { step } = action.payload;\n\n            return {\n                ...state,\n                startYear: state.startYear - step,\n                date: {\n                    day: state.date.day,\n                    monthIndex: state.date.monthIndex,\n                    year: state.date.year - step,\n                },\n            };\n        }\n        case ActionType.NEXT_YEAR: {\n            const { step } = action.payload;\n\n            return {\n                ...state,\n                startYear: state.startYear + step,\n                date: {\n                    day: state.date.day,\n                    monthIndex: state.date.monthIndex,\n                    year: state.date.year + step,\n                },\n            };\n        }\n        case ActionType.PREVIOUS_START_YEAR: {\n            const { yearsCount } = action.payload;\n\n            return {\n                ...state,\n                startYear: state.startYear - yearsCount,\n            };\n        }\n        case ActionType.NEXT_START_YEAR: {\n            const { yearsCount } = action.payload;\n\n            return {\n                ...state,\n                startYear: state.startYear + yearsCount,\n            };\n        }\n        case ActionType.UPDATE_DATE: {\n            const { value } = action.payload;\n            const date = getDateFromValue(value);\n            const startYear = getStartYear(value.getFullYear());\n\n            return {\n                ...state,\n                date,\n                startYear,\n            };\n        }\n        case ActionType.UPDATE_MONTH: {\n            const { calendarState, monthIndex, size } = action.payload;\n\n            return {\n                ...state,\n                size,\n                calendarState,\n                date: {\n                    day: state.date.day,\n                    monthIndex,\n                    year: state.date.year,\n                },\n            };\n        }\n        case ActionType.UPDATE_YEAR: {\n            const { calendarState, year } = action.payload;\n\n            return {\n                ...state,\n                calendarState,\n                date: {\n                    day: state.date.day,\n                    monthIndex: state.date.monthIndex,\n                    year,\n                },\n            };\n        }\n        case ActionType.UPDATE_CALENDAR_STATE: {\n            const { calendarState, size } = action.payload;\n\n            return {\n                ...state,\n                calendarState,\n                size: size || state.size,\n            };\n        }\n        default:\n            return state;\n    }\n};\n"],"names":["getInitialState","value","size","calendarState","initDate","Date","date","getDateFromValue","_objectSpread","day","undefined","startYear","getStartYear","year","reducer","state","action","type","ActionType","PREVIOUS_MONTH","_action$payload","payload","monthIndex","_getPrevDate","getPrevDate","_getPrevDate2","_slicedToArray","prevYear","prevMonthIndex","NEXT_MONTH","_action$payload2","_getNextDate","getNextDate","_getNextDate2","nextYear","nextMonthIndex","PREVIOUS_YEAR","step","NEXT_YEAR","PREVIOUS_START_YEAR","yearsCount","NEXT_START_YEAR","UPDATE_DATE","getFullYear","UPDATE_MONTH","_action$payload3","UPDATE_YEAR","_action$payload4","UPDATE_CALENDAR_STATE","_action$payload5"],"mappings":"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"}