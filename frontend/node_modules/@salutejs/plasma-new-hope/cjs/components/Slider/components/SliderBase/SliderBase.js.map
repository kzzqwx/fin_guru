{"version":3,"file":"SliderBase.js","sources":["../../../../../src/components/Slider/components/SliderBase/SliderBase.tsx"],"sourcesContent":["import React, { PropsWithChildren, useRef, MouseEventHandler, useEffect } from 'react';\nimport { DraggableData } from 'react-draggable';\n\nimport { useIsomorphicLayoutEffect } from '../../../../hooks';\n\nimport type { SliderViewProps } from './SliderBase.types';\nimport { Fill, Rail, RailWrap, Slider } from './SliderBase.styles';\n\nexport const SliderBase: React.FC<PropsWithChildren<SliderViewProps>> = ({\n    max,\n    min,\n    setStepSize,\n    railFillWidth,\n    children,\n    railFillXPosition = 0,\n    disabled,\n    labelPlacement,\n    rangeValuesPlacement,\n    onChange,\n    settings = {},\n}) => {\n    const { indent = 0.75, fontSizeMultiplier = 16 } = settings;\n\n    const ref = useRef<HTMLDivElement | null>(null);\n    const gap = indent * fontSizeMultiplier * 2;\n\n    useEffect(() => {\n        const resizeHandler = () => {\n            if (ref.current) {\n                const railSize = ref.current.offsetWidth - gap;\n                const totalSteps = max - min;\n\n                setStepSize(railSize / totalSteps);\n            }\n        };\n\n        resizeHandler();\n    }, [labelPlacement, rangeValuesPlacement, ref.current]);\n\n    const onHandleChange: MouseEventHandler<HTMLDivElement> = (e) => {\n        if (!onChange || disabled) {\n            return;\n        }\n\n        const { x, width } = e.currentTarget.getBoundingClientRect();\n\n        const lastX = e.clientX - x;\n\n        const position = min + (lastX / (width - gap)) * (max - min);\n        const result = Math.max(min, Math.min(max, position));\n\n        onChange(result, { lastX } as DraggableData);\n    };\n\n    useIsomorphicLayoutEffect(() => {\n        const resizeHandler = () => {\n            if (ref.current) {\n                const railSize = ref.current.offsetWidth - gap;\n                const totalSteps = max - min;\n\n                setStepSize(railSize / totalSteps);\n            }\n        };\n\n        resizeHandler();\n        window.addEventListener('resize', resizeHandler);\n\n        return () => window.removeEventListener('resize', resizeHandler);\n    }, [min, max, setStepSize, ref.current, gap, labelPlacement, rangeValuesPlacement]);\n\n    const fillStyle = { left: `${railFillXPosition}px`, width: `${railFillWidth}px` };\n\n    return (\n        <Slider ref={ref}>\n            <RailWrap aria-hidden=\"true\" onMouseDown={onHandleChange}>\n                <Rail>\n                    <Fill style={fillStyle} />\n                </Rail>\n            </RailWrap>\n\n            {children}\n        </Slider>\n    );\n};\n"],"names":["SliderBase","_ref","max","min","setStepSize","railFillWidth","children","_ref$railFillXPositio","railFillXPosition","disabled","labelPlacement","rangeValuesPlacement","onChange","_ref$settings","settings","_settings$indent","indent","_settings$fontSizeMul","fontSizeMultiplier","ref","useRef","gap","useEffect","resizeHandler","current","railSize","offsetWidth","totalSteps","onHandleChange","e","_e$currentTarget$getB","currentTarget","getBoundingClientRect","x","width","lastX","clientX","position","result","Math","useIsomorphicLayoutEffect","window","addEventListener","removeEventListener","fillStyle","left","concat","React","createElement","Slider","RailWrap","onMouseDown","Rail","Fill","style"],"mappings":"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"}