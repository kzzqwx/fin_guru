{"ast":null,"code":"var _excluded = [\"id\", \"size\", \"disabled\", \"status\", \"label\", \"placeholder\", \"contentLeft\", \"contentRight\", \"helperText\", \"style\", \"className\", \"onChange\", \"onSearch\", \"rightTrailingSymbols\", \"value\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { forwardRef, useCallback, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nimport { FieldRoot, FieldPlaceholder, FieldContent, Input, secondary, useForkRef } from '@salutejs/plasma-core';\nimport { FieldHelper, applyInputStyles } from '../Field';\nimport { spatnavClassNameAttrs } from '../../utils';\nimport { useThemeContext } from '../../hooks';\nimport { HiddenDiv } from './HiddenDiv';\nimport { useTrailingSymbol } from './useTrailingSymbol';\nimport { collectPackageInfo } from '../../collectPackageInfo';\ncollectPackageInfo('TextField/TextField');\nvar positionTopMap = {\n  l: '1.7rem',\n  m: '0.875rem'\n};\nvar StyledInput = /*#__PURE__*/styled(Input).attrs(spatnavClassNameAttrs).withConfig({\n  componentId: \"plasma-ui__sc-1o5gwii-0\"\n})([\"\", \";border-radius:1rem;&::placeholder{opacity:0;}&:placeholder-shown + \", \"{color:\", \";}\"], applyInputStyles, FieldPlaceholder, function (_ref) {\n  var status = _ref.status;\n  return status ? null : secondary;\n});\nexport var RightTrailingSymbols = /*#__PURE__*/styled.div.withConfig({\n  componentId: \"plasma-ui__sc-1o5gwii-1\"\n})([\"position:absolute;z-index:-1;font-family:inherit;line-height:inherit;letter-spacing:inherit;\"]);\nvar Field = /*#__PURE__*/styled(FieldRoot).withConfig({\n  componentId: \"plasma-ui__sc-1o5gwii-2\"\n})([\"\", \"\"], function (_ref2) {\n  var $isContentRight = _ref2.$isContentRight,\n    _ref2$$size = _ref2.$size,\n    $size = _ref2$$size === void 0 ? 'l' : _ref2$$size,\n    _ref2$$rightTrailingS = _ref2.$rightTrailingSymbolsPosition,\n    $rightTrailingSymbolsPosition = _ref2$$rightTrailingS === void 0 ? 0 : _ref2$$rightTrailingS,\n    _ref2$$rightTrailingS2 = _ref2.$rightTrailingSymbolsWidth,\n    $rightTrailingSymbolsWidth = _ref2$$rightTrailingS2 === void 0 ? 0 : _ref2$$rightTrailingS2,\n    _ref2$$rightTrailingS3 = _ref2.$rightTrailingSymbols,\n    $rightTrailingSymbols = _ref2$$rightTrailingS3 === void 0 ? '' : _ref2$$rightTrailingS3,\n    _ref2$$deviceScale = _ref2.$deviceScale,\n    $deviceScale = _ref2$$deviceScale === void 0 ? 1 : _ref2$$deviceScale;\n  var paddingRightBase = $isContentRight ? '4rem' : '2rem';\n  var isSingle = $rightTrailingSymbols.length === 1;\n  var rightTrailingSymbolsWidth = isSingle ? 0 : $rightTrailingSymbolsWidth;\n\n  // INFO: Высчитываем значения для увеличения отступа справа.\n  // INFO: 12 - база для множителя \"на глаз\".\n  var offsetByDeviceScale = isSingle ? $deviceScale * 12 : rightTrailingSymbolsWidth;\n\n  // INFO: Если у нас есть висящие символы, необходимо увеличить отступ справа.\n  var paddingRight = $rightTrailingSymbols ? \"calc(\".concat(paddingRightBase, \" + \").concat(offsetByDeviceScale, \"px)\") : null;\n\n  // INFO: Расчитываем значение для позиции left с учетом deviceScale.\n  // INFO: 8 - база для множителя \"на глаз\" для более равмномерного отступа как для 1 символа, так и текста.\n  var rightTrailingSymbolsPosition = $rightTrailingSymbolsPosition + $deviceScale * 8;\n  return css([\"& > \", \"{padding-right:\", \";}\", \"{top:\", \";left:\", \"px;}\", \"{white-space:\", \";}\"], StyledInput, paddingRight, RightTrailingSymbols, positionTopMap[$size], rightTrailingSymbolsPosition, FieldPlaceholder, $rightTrailingSymbols ? 'pre' : null);\n});\n\n/**\n * Поле ввода текста.\n */\n// eslint-disable-next-line prefer-arrow-callback\nexport var TextField = /*#__PURE__*/forwardRef(function TextField(_ref3, ref) {\n  var _rightTrailingSymbols;\n  var id = _ref3.id,\n    _ref3$size = _ref3.size,\n    size = _ref3$size === void 0 ? 'l' : _ref3$size,\n    disabled = _ref3.disabled,\n    status = _ref3.status,\n    label = _ref3.label,\n    placeholder = _ref3.placeholder,\n    contentLeft = _ref3.contentLeft,\n    contentRight = _ref3.contentRight,\n    helperText = _ref3.helperText,\n    style = _ref3.style,\n    className = _ref3.className,\n    onChange = _ref3.onChange,\n    onSearch = _ref3.onSearch,\n    rightTrailingSymbols = _ref3.rightTrailingSymbols,\n    value = _ref3.value,\n    rest = _objectWithoutProperties(_ref3, _excluded);\n  var rightTrailingSymbolsRef = useRef(null);\n  var placeLabel = label || placeholder;\n  var _useThemeContext = useThemeContext(),\n    deviceScale = _useThemeContext.deviceScale;\n  var handleChange = useCallback(function (event) {\n    var maxLength = event.target.maxLength;\n    if (!onChange || maxLength !== -1 && event.target.value.length > maxLength) {\n      return;\n    }\n    onChange(event);\n  }, [onChange]);\n  var handleSearch = useCallback(function (event) {\n    if (event.keyCode === 13 && onSearch) {\n      onSearch(event.target.value, event);\n    }\n  }, [onSearch]);\n  var rightTrailingSymbolsWidth = (rightTrailingSymbolsRef === null || rightTrailingSymbolsRef === void 0 || (_rightTrailingSymbols = rightTrailingSymbolsRef.current) === null || _rightTrailingSymbols === void 0 ? void 0 : _rightTrailingSymbols.clientWidth) || 0;\n  var _useTrailingSymbol = useTrailingSymbol({\n      size: size,\n      contentRight: contentRight,\n      contentLeft: contentLeft,\n      rightTrailingSymbols: rightTrailingSymbols,\n      value: value,\n      rightTrailingSymbolsWidth: rightTrailingSymbolsWidth,\n      deviceScale: deviceScale\n    }),\n    inputRef = _useTrailingSymbol.inputRef,\n    hiddenDivRef = _useTrailingSymbol.hiddenDivRef,\n    rightTrailingSymbolsPosition = _useTrailingSymbol.rightTrailingSymbolsPosition;\n  var forkRef = useForkRef(inputRef, ref);\n  var placeholderText = rightTrailingSymbols && !value ? \"\".concat(placeLabel, \"  \").concat(rightTrailingSymbols) : placeLabel;\n  return /*#__PURE__*/React.createElement(Field, {\n    $size: size,\n    $disabled: disabled,\n    $isContentLeft: Boolean(contentLeft),\n    $isContentRight: Boolean(contentRight),\n    $isHelper: Boolean(helperText),\n    status: status,\n    style: style,\n    className: className,\n    $rightTrailingSymbolsPosition: rightTrailingSymbolsPosition,\n    $rightTrailingSymbolsWidth: rightTrailingSymbolsWidth,\n    $rightTrailingSymbols: rightTrailingSymbols,\n    $deviceScale: deviceScale\n  }, contentLeft && /*#__PURE__*/React.createElement(FieldContent, {\n    pos: \"left\"\n  }, contentLeft), /*#__PURE__*/React.createElement(StyledInput, _extends({\n    $size: size,\n    ref: forkRef,\n    id: id,\n    placeholder: placeLabel,\n    disabled: disabled,\n    status: status,\n    \"aria-describedby\": id ? \"\".concat(id, \"-helpertext\") : undefined,\n    onChange: handleChange,\n    onKeyUp: onSearch && handleSearch,\n    value: value\n  }, rest)), placeLabel && size === 'l' && /*#__PURE__*/React.createElement(FieldPlaceholder, {\n    htmlFor: id\n  }, placeholderText), contentRight && /*#__PURE__*/React.createElement(FieldContent, {\n    pos: \"right\"\n  }, contentRight), helperText && /*#__PURE__*/React.createElement(FieldHelper, {\n    id: id ? \"\".concat(id, \"-helpertext\") : undefined\n  }, helperText), value && /*#__PURE__*/React.createElement(RightTrailingSymbols, {\n    ref: rightTrailingSymbolsRef\n  }, rightTrailingSymbols), /*#__PURE__*/React.createElement(HiddenDiv, {\n    ref: hiddenDivRef\n  }, value));\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}