import { IDevice, ILegacyDevice, IMessage } from '../../proto';
import { VpsConfiguration, OriginalMessageType, VpsVersion } from '../../typings';
import { createTransport } from './transport';
export { BatchableMethods } from './methods';
export declare const appendHeader: (uint8Array: Uint8Array) => Uint8Array;
export declare const removeHeader: (uint8Array: Uint8Array) => Uint8Array;
export interface ProtocolError {
    type: 'GET_TOKEN_ERROR';
    message?: string;
}
export interface ProtocolEvents {
    incoming: (message: OriginalMessageType) => void;
    outcoming: (message: OriginalMessageType) => void;
    ready: () => void;
    error: (error: ProtocolError) => void;
}
export declare const createProtocol: (transport: ReturnType<typeof createTransport>, { logger, getToken, ...params }: VpsConfiguration) => {
    clearQueue: () => void;
    destroy: () => void;
    on: <K extends "incoming" | "outcoming" | "ready" | "error">(event: K, cb: ProtocolEvents[K]) => () => void;
    getMessageId: () => number;
    sendCancel: (data: import("../../proto").ICancel, last?: boolean, messageId?: number) => void;
    sendText: (data: string, params?: {
        messageId?: number | undefined;
        last?: 1 | -1 | undefined;
        messageName?: string | undefined;
        vpsToken?: string | undefined;
        userId?: string | undefined;
        token?: string | undefined;
        userChannel?: string | undefined;
        version?: VpsVersion | undefined;
        meta?: {
            [k: string]: string;
        } | undefined;
    }, type?: string, messageId?: number) => void;
    sendSystemMessage: ({ data, messageName: mesName }: {
        data: Record<string, unknown>;
        messageName?: string | undefined;
    }, last?: boolean, messageId?: number, params?: {
        meta?: {
            [k: string]: string;
        } | undefined;
    }) => void;
    sendVoice: (data: Uint8Array, last?: boolean, messageId?: number, mesName?: string | undefined, params?: {
        meta?: {
            [k: string]: string;
        } | undefined;
    }) => void;
    send: (message: IMessage) => void;
    batch: <T>(cb: (methods: import("./methods").BatchableMethods) => T) => T;
    changeConfiguration: (obj: Pick<Partial<{
        userId: string;
        token: string;
        userChannel: string;
        messageName: string | undefined;
        vpsToken: string | undefined;
        version: VpsVersion;
    }> | Partial<{
        token: string;
        messageName: string | undefined;
        version: VpsVersion;
        userId?: undefined;
        userChannel?: undefined;
        vpsToken?: undefined;
    }>, "userId" | "userChannel" | "version" | "messageName" | "vpsToken">) => void;
    changeDevice: (obj: Partial<VpsConfiguration['device']>) => void;
    changeSettings: (obj: Partial<VpsConfiguration['settings']>) => void;
    reconnect: () => void;
    readonly currentMessageId: number;
    readonly configuration: {
        token: string;
        url: string;
        userId: string;
        userChannel: string;
        locale?: string | undefined;
        device?: IDevice | undefined;
        settings: import("../../proto").ISettings;
        fakeVps?: import("../../typings").FakeVpsParams | undefined;
        legacyDevice?: ILegacyDevice | undefined;
        version: VpsVersion;
        messageName?: string | undefined;
        vpsToken?: string | undefined;
        meta?: {
            [k: string]: string;
        } | undefined;
    };
};
//# sourceMappingURL=protocol.d.ts.map